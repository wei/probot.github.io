<h1>Extensions</h1><p>While Probot doesn't have an official extension API, there are a handful of reusable utilities that have been extracted from existing apps.</p><ul><li><a href="#commands">Commands</a></li><li><a href="#metadata">Metadata</a></li><li><a href="#attachments">Attachments</a></li></ul><h2>Commands</h2><p><a href="http://github.com/probot/commands">probot-commands</a> is an extension that adds slash commands to GitHub. Slash commands are lines that start with <code>/</code> in comments on Issues or Pull Requests that allow users to interact directly with your app.</p><p>For example, users could add labels from comments by typing <code>/label in-progress</code>.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> commands <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"probot-commands"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// Type `/label foo, bar` in a comment box for an Issue or Pull Request</span><br>  <span class="token function">commands</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token string">"label"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> command</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> labels <span class="token operator">=</span> command<span class="token punctuation">.</span>arguments<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">, *</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">addLabels</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> labels <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2>Metadata</h2><p><a href="https://github.com/probot/metadata">probot-metadata</a> is an extension that stores metadata on Issues and Pull Requests.</p><p>For example, here is a contrived app that stores the number of times that comments were edited in a discussion and comments with the edit count when the issue is closed.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> metadata <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"probot-metadata"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"issues.edited"</span><span class="token punctuation">,</span> <span class="token string">"issue_comment.edited"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> kv <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">metadata</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">await</span> kv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"edits"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">await</span> kv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"edits"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.closed"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> edits <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">metadata</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"edits"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span><br>      context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">There were </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>edits<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> edits to issues in this thread.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2>Attachments</h2><p><a href="https://github.com/probot/attachments">probot-attachments</a> adds message attachments to comments on GitHub. This extension should be used any time an app is appending content to user comments.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> attachments <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"probot-attachments"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issue_comment.created"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">attachments</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      title<span class="token operator">:</span> <span class="token string">"Hello World"</span><span class="token punctuation">,</span><br>      title_link<span class="token operator">:</span> <span class="token string">"https://example.com/hello"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Check out <a href="https://github.com/probot/unfurl">probot/unfurl</a> to see it in action.</p>