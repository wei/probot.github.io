<h2>Usage</h2><p>Firstly, youâ€™ll need to install the <a href="https://github.com/apps/tap-release">Tap Release GitHub App</a>. This listens out for any releases, or any changes to the configuration.</p><p>Then, add a <code>.github/tap-release.yml</code> configuration file to the GitHub repository where you publish new releases to.</p><p>For example, given the following <code>.github/tap-release.yml</code> file in a <code>my-org/app</code> repository:</p><pre class="language-yml"><code class="language-yml"><span class="token key atrule">asset</span><span class="token punctuation">:</span> app.zip<br><span class="token key atrule">tap</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>org/homebrew<span class="token punctuation">-</span>app/app.rb<br><span class="token key atrule">template</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string"><br>  class App &lt; Formula<br>    desc     "$REPO_DESCRIPTION"<br>    homepage "$REPO_WEBITE"<br>    version  "$STABLE_VERSION"<br>    url      "$STABLE_ASSET_URL"<br>    sha256   "$STABLE_ASSET_SHA256"</span><br><br>    def install<br>      prefix.install "app"<br>    end<br>  end</code></pre><p>When a new release is published to <code>my-org/app</code> (e.g. <code>v4.2.0</code>), containing a <code>app.zip</code> asset, Tap Release would push a commit to the tap formula in the <code>my-org/homebrew-app</code> repository updating it to:</p><pre class="language-rb"><code class="language-rb"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token operator">&lt;</span> <span class="token constant">Formula</span><br>  desc     <span class="token string">"The best app ever."</span><br>  homepage <span class="token string">"https://github.com/my-org/app"</span><br>  version  <span class="token string">"v2.4.0"</span><br>  url      <span class="token string">"https://github.com/my-org/app/releases/download/v4.2.0/app.zip"</span><br>  sha256   <span class="token string">"f3832d8966dd39f7ae1316195ebb379cf18aece281bc2f7c43dd799130ebf460"</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">install</span></span><br>    prefix<span class="token punctuation">.</span>install <span class="token string">"app"</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre><p>If you don't use release assets, you can also just use a URL pattern. For example, given the following template for a <a href="https://docs.brew.sh/Node-for-Formula-Authors">Node style tap</a>:</p><pre class="language-yml"><code class="language-yml"><span class="token key atrule">url</span><span class="token punctuation">:</span> <span class="token string">"https://registry.npmjs.org/app/-/app-$VERSION_NUMBER.tgz"</span><br><span class="token key atrule">tap</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>org/homebrew<span class="token punctuation">-</span>app/app.rb<br><span class="token key atrule">template</span><span class="token punctuation">:</span> <span class="token punctuation">></span><span class="token scalar string"><br>  class App &lt; Formula<br>    desc     "$REPO_DESCRIPTION"<br>    homepage "$REPO_WEBITE"<br>    version  "$STABLE_VERSION"<br>    url      "$STABLE_ASSET_URL"<br>    sha256   "$STABLE_ASSET_SHA256"</span><br><br>    <span class="token comment"># ...</span><br>  end</code></pre><p>When a new release is published (e.g. <code>v4.2.0</code>), Tap Release would push a commit to the tap formula in the <code>my-org/homebrew-app</code> repository updating it to:</p><pre class="language-rb"><code class="language-rb"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token operator">&lt;</span> <span class="token constant">Formula</span><br>  desc     <span class="token string">"The best app ever."</span><br>  homepage <span class="token string">"https://github.com/my-org/app"</span><br>  version  <span class="token string">"v4.2.0"</span><br>  url      <span class="token string">"https://registry.npmjs.org/app/-/app-4.2.0.tgz"</span><br>  sha256   <span class="token string">"f3832d8966dd39f7ae1316195ebb379cf18aece281bc2f7c43dd799130ebf460"</span><br><br>  <span class="token comment"># ...</span><br><span class="token keyword">end</span></code></pre><h2>Template variables</h2><p>You can use any of the following variables in your formula template, and they'll be substituted when the tap is regenerated:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>$REPO_DESCRIPTION</code></td><td>GitHub repository description.</td></tr><tr><td><code>$REPO_WEBSITE</code></td><td>GitHub repository website, or URL if there isn't one.</td></tr><tr><td><code>$STABLE_VERSION</code></td><td>Tag name of the latest stable release.</td></tr><tr><td><code>$STABLE_ASSET_URL</code></td><td>Download URL of the asset from the latest stable release.</td></tr><tr><td><code>$STABLE_ASSET_SHA256</code></td><td>SHA256 of the asset from the latest stable release.</td></tr><tr><td><code>$DEVEL_VERSION</code></td><td>Tag name of the latest pre-release.</td></tr><tr><td><code>$DEVEL_ASSET_URL</code></td><td>Wownload URL of the asset from the latest pre-release.</td></tr><tr><td><code>$DEVEL_ASSET_SHA256</code></td><td>SHA256 of the asset from the latest pre-release.</td></tr></tbody></table><h2>URL variables</h2><p>You can use any of the following variables in your URL template, and they'll be substituted for each stable and development release when the tap is regenerated:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>$VERSION</code></td><td>The version (e.g. <code>v1.0.2</code>.</td></tr><tr><td><code>$VERSION_NUMBER</code></td><td>The version without the preceding <code>v</code> (e.g. <code>1.0.2</code>).</td></tr></tbody></table><h2>Configuration options</h2><p>You can configure Tap Release using the following key in your <code>.github/tap-release.yml</code> file:</p><table><thead><tr><th>Key</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>tap</code></td><td>Required</td><td>The path to the Homebrew tap repository that should be updated.</td></tr><tr><td><code>template</code></td><td>Required</td><td>The template string to use to generate the tap. Use <a href="#template-variables">template variables</a> to insert the values from the releases.</td></tr><tr><td><code>asset</code></td><td>Optional</td><td>Filename of the asset to use from the release.</td></tr><tr><td><code>url</code></td><td>Optional</td><td>URL pattern to generate the download URLs. Use <a href="#url-variables">URL variables</a> to insert the values from the release.</td></tr><tr><td><code>branches</code></td><td>Optional</td><td>A list of branches that trigger the tap to be updated when the <code>.github/tap-release.yml</code> file is modified. Useful if you want to test the app on a pull request branch. Default is <code>&quot;master&quot;</code>.</td></tr></tbody></table><p>Tap Release also supports <a href="https://github.com/probot/probot-config">Probot Config</a>, if you want to store your configuration files in a central repository.</p>