<h1>Prevent-Public-Repos Probot App</h1><p>A GitHub Probot App that monitors and prevents Public Repositories from being created in an organization.</p><h2>Features</h2><ul><li>Can convert newly created Public Repos to Private</li><li>Can also be enabled for repos that switch visibility from private to public<ul><li>Not enabled by default it is possible to restrict visibility changes to org owners <a href="https://help.github.com/articles/repository-permission-levels-for-an-organization/#changing-the-visibility-of-repositories">directly in GitHub</a>.</li></ul></li><li>Will create an issue in the repo explaining the action</li><li>Monitor only mode will not change the repo visibility but will still create an issue</li><li>Can set configuration parameters by using YAML file set in a specific repo for the entire org</li><li>Can exclude certain repos</li><li>Can set a list of users/groups to cc on every issue created</li></ul><h2>Get Started</h2><ol><li><a href="https://github.com/apps/prevent-public-repos">Configure the GitHub App</a></li><li>[Recommended] Create repo named <code>org-settings</code> and in it a file <code>.github/prevent-public-repos.yml</code> as described in the <a href="#how-it-works">How it Works</a> section to configure settings (and override defaults)</li><li>It will then prevent public repos from being created</li></ol><h2>How it Works</h2><p>By default when a new repository is created with Public visibility, an Issue will be created in the repository warning that it is Public to the internet [Monitor-Only mode is enabled].</p><p>A <code>.github/prevent-public-repos.yml</code> file is recommended to override the <a href="https://github.com/issc29/probot-prevent-public-repos/blob/master/lib/defaults.js">default settings</a> created in Repository <code>org-settings</code>. This repository will contain global settings for the organization.</p><pre class="language-yml"><code class="language-yml"><span class="token comment"># Configuration for Prevent-Public-Repos</span><br><br><span class="token comment"># Turn on Monitor Mode. In this mode the repo visibility is not modified and only an Issue is created</span><br><span class="token key atrule">monitorOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br><br><span class="token comment"># Enables detection of repos that change visibility from private to public (not just newly created ones)</span><br><span class="token key atrule">enablePrivateToPublic</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><br><br><span class="token comment"># Issue Title when repo is privatized</span><br><span class="token key atrule">privatizedIssueTitle</span><span class="token punctuation">:</span> <span class="token string">'[CRITICAL] Public Repositories are Disabled for this Org'</span><br><br><span class="token comment"># Issue Body when repo is privatized</span><br><span class="token key atrule">privatizedIssueBody</span><span class="token punctuation">:</span> <span class="token string">'NOTE: Public Repos are disabled for this organization! Repository was automatically converted to a Private Repo. Please contact an admin to override.'</span><br><br><span class="token comment"># Issue Title when monitor mode is enabled</span><br><span class="token key atrule">monitorIssueTitle</span><span class="token punctuation">:</span> <span class="token string">'[CRITICAL] Public Repository Created'</span><br><br><span class="token comment"># Issue Body when monitor mode is enable</span><br><span class="token key atrule">monitorIssueBody</span><span class="token punctuation">:</span> <span class="token string">'Please note that this repository is publicly visible to the internet!'</span><br><br><span class="token comment"># Users/Groups that should be cc'ed on the issue. Should be users/groups separated by a space.</span><br><span class="token comment"># ccList: '@user123 @user456'</span><br><br><span class="token comment"># Repos to  exclude in detection. Should be a List of Strings.</span><br><span class="token comment"># excludeRepos: ['repo1', 'repo2']</span></code></pre><p>When setting up this Probot App you can also set a number of Environment Variables</p><h2>Deployment</h2><p>See <a href="https://github.com/issc29/probot-prevent-public-repos/blob/master/docs/deploy.md">docs/deploy.md</a> if you would like to run your own instance of this app.</p><p>Possible Environment Variables:</p><ul><li>FILE_NAME [default: '.github/prevent-public-repos.yml'] - Sets the location/file name of the config yml file</li><li>ORG_WIDE_REPO_NAME [default: 'org-settings'] - Set the repo where to find the config yml file</li></ul>