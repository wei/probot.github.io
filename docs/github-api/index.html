<!doctype html><html lang="en" class="height-full" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="/assets/dist/styles.css"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=jw3d9vxKo4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=jw3d9vxKo4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=jw3d9vxKo4"><link rel="manifest" href="/site.webmanifest?v=jw3d9vxKo4"><link rel="mask-icon" href="/safari-pinned-tab.svg?v=jw3d9vxKo4" color="#5bbad5"><link rel="shortcut icon" href="/favicon.ico?v=jw3d9vxKo4"><meta name="theme-color" content="#66cce0"><meta name="twitter:site" content="@ProbotTheRobot"><meta property="twitter:card" content="summary_large_image"><meta property="og:image" content="/assets/img/card.png"><meta property="og:image:height" content="1280"><meta property="og:image:width" content="630"><meta property="twitter:image:alt" content=""><meta property="og:image:type" content="image/png"><meta property="twitter:image" content="/assets/img/card.png"><meta property="twitter:image:height" content="1280"><meta property="twitter:image:width" content="630"><meta property="twitter:image:alt" content=""><meta property="twitter:image:type" content="image/png"><meta property="og:type" content="website"></head><body><div class="border-bottom"><div class="container-lg px-3"><div class="py-4 d-flex flex-justify-between"><h1 class="h4 lh-default"><a href="/" class="no-underline text-uppercase text-brand-blue-dark d-flex flex-items-center"><img class="mr-2 mt-n2" src="/assets/img/probot-head.png" width="36" height="36" alt=""> <span class="hide-sm">Probot</span></a></h1><nav class="text-bold text-right"><a class="text-inherit px-2 d-inline-block" href="/apps/">Apps</a> <a class="text-inherit px-2 d-inline-block" href="/docs/">Docs</a> <a class="text-inherit px-2 d-inline-block" href="/community/">Community</a></nav></div></div></div><div class="container-lg px-3 py-6"><div class="d-md-flex flex-md-row flex-md-row-reverse gutter-md-spacious"><div class="col-md-9 markdown-body p-md-6"><h1>Interacting with GitHub</h1><p>Probot uses <a href="https://docs.github.com/developers/apps/">GitHub Apps</a> for authorizing requests to GitHub's APIs. A registered GitHub App is a first-class actor on GitHub, like a user (e.g. <a href="https://github.com/bkeepers">@bkeepers</a>) or an organization (e.g. <a href="https://github.com/github">@github</a>). The GitHub App is granted access to all or selected repositories by being &quot;installed&quot; on a user or organization account and can perform actions through the API like <a href="https://docs.github.com/rest/reference/issues#create-an-issue-comment">commenting on an issue</a> or <a href="https://docs.github.com/rest/reference/repos#create-a-commit-status">creating a status</a>.</p><p>Your Probot app has access to an authenticated <a href="https://octokit.github.io/rest.js/">Octokit client</a> that can be used to make API calls. It supports both the <a href="https://docs.github.com/rest">GitHub REST API</a>, and the <a href="https://docs.github.com/graphql">GitHub GraphQL API</a>.</p><h2>REST API</h2><p><code>context.octokit</code> is an instance of the <a href="https://github.com/octokit/rest.js#readme"><code>@octokit/rest</code> Node.js module</a>, and allows you to do almost anything programmatically that you can do through a web browser.</p><p>Here is an example of an autoresponder app that comments on opened issues:</p><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// `context` extracts information from the event, which can be passed to</span><br>    <span class="token comment">// GitHub API calls. This will return:</span><br>    <span class="token comment">//   { owner: 'yourname', repo: 'yourrepo', number: 123, body: 'Hello World! }</span><br>    <span class="token keyword">const</span> params <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> body<span class="token operator">:</span> <span class="token string">"Hello World!"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Post a comment on the issue</span><br>    <span class="token keyword">return</span> context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>See the <a href="https://octokit.github.io/rest.js/">full API docs</a> to see all the ways you can interact with GitHub. Some API endpoints are not available on GitHub Apps yet, so check <a href="https://docs.github.com/en/rest/overview/endpoints-available-for-github-apps">which ones are available</a> first.</p><h2>GraphQL API</h2><p>Use <code>context.octokit.graphql</code> to make requests to the <a href="https://docs.github.com/en/graphql">GitHub GraphQL API</a>.</p><p>Here is an example of the same autoresponder app from above that comments on opened issues, but this time with GraphQL:</p><pre class="language-js"><code class="language-js"><span class="token comment">// GraphQL query to add a comment</span><br><span class="token keyword">const</span> addComment <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  mutation comment($id: ID!, $body: String!) {<br>    addComment(input: {subjectId: $id, body: $body}) {<br>      clientMutationId<br>    }<br>  }<br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// Post a comment on the issue</span><br>    context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span><span class="token function">graphql</span><span class="token punctuation">(</span>addComment<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>      id<span class="token operator">:</span> context<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>issue<span class="token punctuation">.</span>node_id<span class="token punctuation">,</span><br>      body<span class="token operator">:</span> <span class="token string">"Hello World"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>The options in the 2nd argument will be passed as variables to the query. You can pass custom headers by using the <code>headers</code> key:</p><pre class="language-js"><code class="language-js"><span class="token comment">// GraphQL query to pin an issue</span><br><span class="token keyword">const</span> pinIssue <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  mutation comment($id: ID!) {<br>    pinIssue(input: {subjectId: $id}) {<br>      clientMutationId<br>    }<br>  }<br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span><span class="token function">graphql</span><span class="token punctuation">(</span>pinIssue<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>      id<span class="token operator">:</span> context<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>issue<span class="token punctuation">.</span>node_id<span class="token punctuation">,</span><br>      headers<span class="token operator">:</span> <span class="token punctuation">{</span><br>        accept<span class="token operator">:</span> <span class="token string">"application/vnd.github.elektra-preview+json"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Check out the <a href="https://docs.github.com/en/graphql">GitHub GraphQL API docs</a> to learn more.</p><h2>Unauthenticated Events</h2><p>When <a href="./webhooks.md">receiving webhook events</a>, <code>context.octokit</code> is <em>usually</em> an authenticated client, but there are a few events that are exceptions:</p><ul><li><p><a href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#installation"><code>installation.deleted</code> &amp; <code>installation.suspend</code></a> - The installation was <em>just</em> deleted or suspended, so we can't authenticate as the installation.</p></li><li><p><a href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads#marketplace_purchase"><code>marketplace_purchase</code></a> - The purchase happens before the app is installed on an account.</p></li></ul><p>For these events, <code>context.octokit</code> will be unauthenticated. Attemts to send any requests will fail with an error explaining the circumstances.</p><h2>GitHub Enterprise</h2><p>If you want to run a Probot App against a GitHub Enterprise instance, you'll need to create and set the <code>GHE_HOST</code> environment variable inside of the <code>.env</code> file.</p><pre><code>GHE_HOST=fake.github-enterprise.com
</code></pre><p>When <a href="./development.md#run-probot-programmatically">using Probot programmatically</a>, set the <code>baseUrl</code> option for the <a href="https://probot.github.io/api/latest/classes/probot.html"><code>Probot</code></a> constructor to the full base Url of the REST API</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> MyProbot <span class="token operator">=</span> Probot<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  baseUrl<span class="token operator">:</span> <span class="token string">"https://fake.github-enterprise.com/api/v3"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="d-flex border-bottom border-gray-light mt-6 mb-3 py-3 color-text-tertiary"><div class="col-6"></div><div class="col-6 text-right"></div></div><p class="alt-text-small color-text-tertiary">Found a mistake or want to help improve this documentation? <a href="https://github.com/probot/probot/edit/master/">Suggest changes on GitHub</a></p></div><div id="toc" class="col-md-3 py-6"><div class="toc-wrap"><h2 class="h4">Getting Started</h2><ul class="mt-2 mb-4 list-style-none"><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/README">Introduction</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/hello-world">Hello World</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/development">Developing an app</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/webhooks">Receiving webhooks</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/github-api">Interacting with GitHub</a></li></ul><h2 class="h4">Advanced</h2><ul class="mt-2 mb-4 list-style-none"><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/configuration">Configuration</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/testing">Testing</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/simulating-webhooks">Simulate receiving webhooks</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/logging">Logging</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/deployment">Deployment</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/http">HTTP routes</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/pagination">Pagination</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/extensions">Extensions</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/persistence">Persistence</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/best-practices">Best practices</a></li></ul><h2 class="h4">Reference</h2><ul class="mt-2 mb-4 list-style-none"><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/classes/probot.html">Probot</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/classes/context.html">context</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="http://octokit.github.io/rest.js/">context.octokit</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/index.html#run">run</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/index.html#createnodemiddleware">createNodeMiddleware</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://docs.github.com/en/free-pro-team@latest/developers/webhooks-and-events/webhook-events-and-payloads">GitHub Webhook Events</a></li></ul></div></div></div></div><script src="/assets/js/anchor.min.js"></script><script type="text/javascript">anchors.options = {
    placement: 'left',
    class: 'color-text-secondary no-underline'
  };

  anchors.add();
  anchors.remove('.h4');</script><div class="color-bg-tertiary color-text-secondary border-top pt-4 mt-4"><div class="container-lg px-3 page-section d-md-flex flex-md-row-reverse"><div class="col-md-6"><div id="mc_embed_signup" class="mb-3"><form action="//opensoul.us13.list-manage.com/subscribe/post?u=f8cb6fe4ce6000c8b5817787c&amp;id=a0282a3736" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate><div id="mc_embed_signup_scroll"><h3 class="h4 lh-condensed"><label for="mce-EMAIL">Subscribe</label></h3><p>Get occasional updates on new apps &amp; features.</p><div class="d-flex flex-row gutter-condensed mb-sm-2"><div class="flex-self-stretch col-8"><input type="email" value="" name="EMAIL" class="form-control width-full" id="mce-EMAIL" placeholder="email address" required></div><div class="flex-justify-end col-4"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn width-full text-center"></div></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f8cb6fe4ce6000c8b5817787c_a0282a3736" tabindex="-1" value=""></div></div></form></div></div><div class="col-md-6"><p><span class="mr-2 d-inline-block"><a class="github-button" href="https://github.com/probot/probot" data-size="large" data-icon="octicon-star" data-show-count="true" aria-label="Star probot/probot on GitHub" ga-on="click" ga-hit-type="social" ga-social-network="GitHub" ga-social-action="star">Star</a> </span><a href="https://twitter.com/ProbotTheRobot" class="twitter-follow-button" data-size="large" data-show-screen-name="false" data-show-count="false">Follow @ProbotTheRobot</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><p><svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-code" aria-hidden="true"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg> with <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-heart" aria-hidden="true"><path fill-rule="evenodd" d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"></path></svg> by <a class="color-text-tertiary" href="https://github.com/probot">the Probot community</a></p><p style="opacity: 0.5"><span class="mr-2">Code licensed <a class="text-inherit" href="https://github.com/probot/probot/blob/master/LICENSE">ISC</a></span> <span>Docs licensed <a class="text-inherit" href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a></span></p></div></div><div class="text-center"></div></div><script async src="https://buttons.github.io/buttons.js"></script><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></body></html>