<!doctype html><html lang="en" class="height-full" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="/assets/dist/styles.css"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=jw3d9vxKo4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=jw3d9vxKo4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=jw3d9vxKo4"><link rel="manifest" href="/site.webmanifest?v=jw3d9vxKo4"><link rel="mask-icon" href="/safari-pinned-tab.svg?v=jw3d9vxKo4" color="#5bbad5"><link rel="shortcut icon" href="/favicon.ico?v=jw3d9vxKo4"><meta name="theme-color" content="#66cce0"><meta name="twitter:site" content="@ProbotTheRobot"><meta property="twitter:card" content="summary_large_image"><meta property="og:image" content="/assets/img/card.png"><meta property="og:image:height" content="1280"><meta property="og:image:width" content="630"><meta property="twitter:image:alt" content=""><meta property="og:image:type" content="image/png"><meta property="twitter:image" content="/assets/img/card.png"><meta property="twitter:image:height" content="1280"><meta property="twitter:image:width" content="630"><meta property="twitter:image:alt" content=""><meta property="twitter:image:type" content="image/png"><meta property="og:type" content="website"></head><body><div class="border-bottom"><div class="container-lg px-3"><div class="py-4 d-flex flex-justify-between"><h1 class="h4 lh-default"><a href="/" class="no-underline text-uppercase text-brand-blue-dark d-flex flex-items-center"><img class="mr-2 mt-n2" src="/assets/img/probot-head.png" width="36" height="36" alt=""> <span class="hide-sm">Probot</span></a></h1><nav class="text-bold text-right"><a class="text-inherit px-2 d-inline-block" href="/apps/">Apps</a> <a class="text-inherit px-2 d-inline-block" href="/docs/">Docs</a> <a class="text-inherit px-2 d-inline-block" href="/community/">Community</a></nav></div></div></div><div class="container-lg px-3 py-6"><div class="d-md-flex flex-md-row flex-md-row-reverse gutter-md-spacious"><div class="col-md-9 markdown-body p-md-6"><h1>Persistence</h1><p>Generally speaking, adding database storage or persistence to your Probot App will greatly complicate your life. It's perfectly doable, but for most use-cases you'll be able to manage relevant data within GitHub issues, pull requests and your app's configuration file.</p><p><strong>Contents:</strong></p><ul><li><a href="#using-github-for-persistent-data">Using GitHub for persistent data</a></li><li><a href="#using-a-database">Using a Database</a><ul><li><a href="#mongodb-with-mongoose">MongoDB (with Mongoose)</a></li><li><a href="#mysql">MySQL</a></li><li><a href="#postgres">Postgres</a></li><li><a href="#firebase">Firebase</a></li></ul></li></ul><h2>Using GitHub for persistent data</h2><p>Probot includes a wrapper for the GitHub API which can enable you to store and manipulate data in the GitHub environment. Since your Probot App will usually be running to supplement work done on GitHub, it makes sense to try to keep everything in one place and avoid extra complications.</p><ul><li><em>Comments:</em> The API can read, write and delete comments on issues and pull requests.</li><li><em>Status:</em> The API can read and change the status of an issue or pull request.</li><li><em>Search:</em> GitHub has a powerful search API that can be used</li><li><em>Repository:</em> Built-in <code>context.config()</code> allows storing configuration in the repository or the organization's <code>.github</code> repository.</li><li><em>Labels:</em> The API can read labels, and add or remove them from issues and pull requests.</li></ul><p>If your Probot App needs to store more data than Issues and Pull Requests store normally, you can use the <a href="/docs/extensions#metadata"><code>probot-metadata</code> extension</a> to hide data in comments. It isn't meant to be super secure or scalable, but it's an easy way to manage some data without a full database.</p><p>There are even more APIs that you can use to increase the functionality of your Probot App. You can read about all of the ones available in Probot on the <a href="http://octokit.github.io/rest.js/"><code>@octokit/rest</code> documentation</a>.</p><h2>Using a Database</h2><p>For when you absolutely do need external data storage, here are some examples using a few popular database solutions. Note that these are just suggestions, and that your implementation will vary.</p><h3>MongoDB (with Mongoose)</h3><p><a href="https://mongodb.com">MongoDB</a> is a popular NoSQL database, and <a href="http://mongoosejs.com">Mongoose</a> is a widely used Node.js wrapper for it.</p><pre class="language-js"><code class="language-js"><span class="token comment">// PeopleSchema.js</span><br><br><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mongoose"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span><br><br><span class="token keyword">const</span> PeopleSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token punctuation">{</span><br>    type<span class="token operator">:</span> String<span class="token punctuation">,</span><br>    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">"People"</span><span class="token punctuation">,</span> PeopleSchema<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// index.js</span><br><br><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mongoose"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Connect to the Mongo database using credentials</span><br><span class="token comment">// in your environment variables</span><br><span class="token keyword">const</span> mongoUri <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">mongodb://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DB_HOST</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>mongoUri<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>  user<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DB_USER</span><span class="token punctuation">,</span><br>  pass<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DB_PASS</span><span class="token punctuation">,</span><br>  useMongoClient<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Register the mongoose model</span><br><span class="token keyword">const</span> People <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./PeopleSchema"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// Find all the people in the database</span><br>    <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token keyword">await</span> People<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Generate a string using all the peoples' names.</span><br>    <span class="token comment">// It would look like: 'Jason, Jane, James, Jennifer'</span><br>    <span class="token keyword">const</span> peoplesNames <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">person</span><span class="token punctuation">)</span> <span class="token operator">=></span> person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// `context` extracts information from the event, which can be passed to</span><br>    <span class="token comment">// GitHub API calls. This will return:</span><br>    <span class="token comment">//   { owner: 'yourname', repo: 'yourrepo', number: 123, body: 'The following people are in the database: Jason, Jane, James, Jennifer' }</span><br>    <span class="token keyword">const</span> params <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The following people are in the database: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>peoplesNames<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Post a comment on the issue</span><br>    <span class="token keyword">return</span> context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3>MySQL</h3><p>Using the <a href="https://www.atdatabases.org/docs/mysql.html"><code>@databases/mysql</code></a> module, we can connect to our MySQL database and perform queries.</p><pre class="language-js"><code class="language-js"><span class="token comment">// connection.js</span><br><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@databases/mysql"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// DATABASE_URL = mysql://my-user:my-password@localhost/my-db</span><br><span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> connection<span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// index.js</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> sql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@databases/mysql"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./connection"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// Find all the people in the database</span><br>    <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT * FROM people</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Generate a string using all the peoples' names.</span><br>    <span class="token comment">// It would look like: 'Jason, Jane, James, Jennifer'</span><br>    <span class="token keyword">const</span> peoplesNames <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=></span> people<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// `context` extracts information from the event, which can be passed to</span><br>    <span class="token comment">// GitHub API calls. This will return:</span><br>    <span class="token comment">//   { owner: 'yourname', repo: 'yourrepo', number: 123, body: 'The following people are in the database: Jason, Jane, James, Jennifer' }</span><br>    <span class="token keyword">const</span> params <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The following people are in the database: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>peoplesNames<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Post a comment on the issue</span><br>    <span class="token keyword">return</span> context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3>Postgres</h3><p>Using the <a href="https://www.atdatabases.org/docs/pg.html"><code>@databases/pg</code></a> module, we can connect to our Postgres database and perform queries.</p><pre class="language-js"><code class="language-js"><span class="token comment">// connection.js</span><br><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@databases/pg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// DATABASE_URL = postgresql://my-user:my-password@localhost/my-db</span><br><span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> connection<span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// index.js</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> sql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@databases/pg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./connection"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// Find all the people in the database</span><br>    <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token keyword">await</span> connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT * FROM people</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Generate a string using all the peoples' names.</span><br>    <span class="token comment">// It would look like: 'Jason, Jane, James, Jennifer'</span><br>    <span class="token keyword">const</span> peoplesNames <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=></span> people<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// `context` extracts information from the event, which can be passed to</span><br>    <span class="token comment">// GitHub API calls. This will return:</span><br>    <span class="token comment">//   { owner: 'yourname', repo: 'yourrepo', number: 123, body: 'The following people are in the database: Jason, Jane, James, Jennifer' }</span><br>    <span class="token keyword">const</span> params <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The following people are in the database: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>peoplesNames<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Post a comment on the issue</span><br>    <span class="token keyword">return</span> context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3>Firebase</h3><p><a href="https://firebase.google.com/">Firebase</a> is Google's services-as-a-service that includes a simple JSON database. You can learn more about dealing with the JavaScript API <a href="https://firebase.google.com/docs/database/web/start">here</a>. Note that for security purposes, you may also want to look into the <a href="https://firebase.google.com/docs/database/admin/start">Admin API</a>.</p><pre class="language-js"><code class="language-js"><span class="token comment">// index.js</span><br><br><span class="token keyword">const</span> firebase <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"firebase"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// Set the configuration for your app</span><br><span class="token comment">// TODO: Replace with your project's config object</span><br><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><br>  apiKey<span class="token operator">:</span> <span class="token string">"apiKey"</span><span class="token punctuation">,</span><br>  authDomain<span class="token operator">:</span> <span class="token string">"projectId.firebaseapp.com"</span><span class="token punctuation">,</span><br>  databaseURL<span class="token operator">:</span> <span class="token string">"https://databaseName.firebaseio.com"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br>firebase<span class="token punctuation">.</span><span class="token function">initializeApp</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> database <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"issues.opened"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// Find all the people in the database</span><br>    <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token keyword">await</span> database<br>      <span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">"/people"</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">snapshot</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> snapshot<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Generate a string using all the peoples' names.</span><br>    <span class="token comment">// It would look like: 'Jason, Jane, James, Jennifer'</span><br>    <span class="token keyword">const</span> peoplesNames <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=></span> people<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// `context` extracts information from the event, which can be passed to</span><br>    <span class="token comment">// GitHub API calls. This will return:</span><br>    <span class="token comment">//   { owner: 'yourname', repo: 'yourrepo', number: 123, body: 'The following people are in the database: Jason, Jane, James, Jennifer' }</span><br>    <span class="token keyword">const</span> params <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">issue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      body<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The following people are in the database: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>peoplesNames<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Post a comment on the issue</span><br>    <span class="token keyword">return</span> context<span class="token punctuation">.</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><div class="d-flex border-bottom border-gray-light mt-6 mb-3 py-3 color-text-tertiary"><div class="col-6"></div><div class="col-6 text-right"></div></div><p class="alt-text-small color-text-tertiary">Found a mistake or want to help improve this documentation? <a href="https://github.com/probot/probot/edit/master/">Suggest changes on GitHub</a></p></div><div id="toc" class="col-md-3 py-6"><div class="toc-wrap"><h2 class="h4">Getting Started</h2><ul class="mt-2 mb-4 list-style-none"><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/README">Introduction</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/hello-world">Hello World</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/development">Developing an app</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/webhooks">Receiving webhooks</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/github-api">Interacting with GitHub</a></li></ul><h2 class="h4">Advanced</h2><ul class="mt-2 mb-4 list-style-none"><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/configuration">Configuration</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/testing">Testing</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/simulating-webhooks">Simulate receiving webhooks</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/logging">Logging</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/deployment">Deployment</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/http">HTTP routes</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/pagination">Pagination</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/extensions">Extensions</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/persistence">Persistence</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="/docs/best-practices">Best practices</a></li></ul><h2 class="h4">Reference</h2><ul class="mt-2 mb-4 list-style-none"><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/classes/probot.html">Probot</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/classes/context.html">context</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="http://octokit.github.io/rest.js/">context.octokit</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/index.html#run">run</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://probot.github.io/api/latest/index.html#createnodemiddleware">createNodeMiddleware</a></li><li><a class="d-block no-underline py-1 color-text-tertiary" href="https://docs.github.com/en/free-pro-team@latest/developers/webhooks-and-events/webhook-events-and-payloads">GitHub Webhook Events</a></li></ul></div></div></div></div><script src="/assets/js/anchor.min.js"></script><script type="text/javascript">anchors.options = {
    placement: 'left',
    class: 'color-text-secondary no-underline'
  };

  anchors.add();
  anchors.remove('.h4');</script><div class="color-bg-tertiary color-text-secondary border-top pt-4 mt-4"><div class="container-lg px-3 page-section d-md-flex flex-md-row-reverse"><div class="col-md-6"><div id="mc_embed_signup" class="mb-3"><form action="//opensoul.us13.list-manage.com/subscribe/post?u=f8cb6fe4ce6000c8b5817787c&amp;id=a0282a3736" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate><div id="mc_embed_signup_scroll"><h3 class="h4 lh-condensed"><label for="mce-EMAIL">Subscribe</label></h3><p>Get occasional updates on new apps &amp; features.</p><div class="d-flex flex-row gutter-condensed mb-sm-2"><div class="flex-self-stretch col-8"><input type="email" value="" name="EMAIL" class="form-control width-full" id="mce-EMAIL" placeholder="email address" required></div><div class="flex-justify-end col-4"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn width-full text-center"></div></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f8cb6fe4ce6000c8b5817787c_a0282a3736" tabindex="-1" value=""></div></div></form></div></div><div class="col-md-6"><p><span class="mr-2 d-inline-block"><a class="github-button" href="https://github.com/probot/probot" data-size="large" data-icon="octicon-star" data-show-count="true" aria-label="Star probot/probot on GitHub" ga-on="click" ga-hit-type="social" ga-social-network="GitHub" ga-social-action="star">Star</a> </span><a href="https://twitter.com/ProbotTheRobot" class="twitter-follow-button" data-size="large" data-show-screen-name="false" data-show-count="false">Follow @ProbotTheRobot</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><p><svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-code" aria-hidden="true"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg> with <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-heart" aria-hidden="true"><path fill-rule="evenodd" d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"></path></svg> by <a class="color-text-tertiary" href="https://github.com/probot">the Probot community</a></p><p style="opacity: 0.5"><span class="mr-2">Code licensed <a class="text-inherit" href="https://github.com/probot/probot/blob/master/LICENSE">ISC</a></span> <span>Docs licensed <a class="text-inherit" href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a></span></p></div></div><div class="text-center"></div></div><script async src="https://buttons.github.io/buttons.js"></script><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></body></html>